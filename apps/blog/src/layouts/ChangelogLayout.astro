---
import "@packages/ui/globals.css";
import type { CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import Footer from "@packages/layouts/astro/Footer";
import FormattedDate from "../components/FormattedDate.astro";
import Header from "../components/Header.astro";
import { ArrowUpRight } from "@lucide/astro";
import Navbar from "@packages/layouts/astro/Navbar";
type Props = CollectionEntry<"changelog">["data"];

const { title, description, badge, heroImage, author, link } = Astro.props;
---

<html lang="en">
<head>
  <BaseHead title={title} description={description} />
</head>

  <body>
    <Navbar />
  <main>
    <article>
      <div class="changelog-container">
        <!-- Timeline Sidebar -->
        <aside class="timeline-sidebar">
          <h2>Timeline</h2>
          <ul class="timeline-list">
            <li>Mar 20, 2025</li>
            <li>Mar 15, 2025</li>
            <li>Mar 10, 2025</li>
          </ul>
        </aside>

        <!-- Main Content -->
        <div class="changelog-content">
          {badge && (
            <div class="changelog-badge">
              <div class="changelog-badge-dot"></div>
              <span class="changelog-badge-text">{badge}</span>
            </div>
          )}
          
          <h1 class="changelog-title">{title}</h1>
          
          <div class="changelog-body">
            <slot />
          </div>
          
          {author && (
            <div class="changelog-author">
              <div class="author-info">
                <div class="author-avatar">
                  <Image 
                    width={32} 
                    height={32} 
                    src="/blog-placeholder-about.jpg" 
                    alt={author.name}
                  />
                </div>
                <div class="author-details">
                  <div class="name">{author.name}</div>
                  <div class="role">{author.role}</div>
                </div>
              </div>
              <div class="author-date">
                <FormattedDate date={Astro.props.date} />
              </div>
            </div>
          )}
          
          {link && (
            <div class="changelog-link">
              <a href={link} target="_blank" rel="noopener noreferrer">
                Learn more <ArrowUpRight size={16} />
              </a>
            </div>
          )}
        </div>
      </div>
    </article>
  </main>
  <Footer />
</body>
</html>
