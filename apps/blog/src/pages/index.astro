---
import Navbar from "@packages/layouts/astro/Navbar";
import Footer from "@packages/layouts/astro/Footer";
import "@packages/ui/globals.css";
import BaseHead from "../components/BaseHead.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../consts";
import { getCollection } from "astro:content";
import LatestPosts from "../components/LatestPosts.astro";

const allPosts = await getCollection("blog");
const posts = allPosts
  .sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime())
  .slice(0, 3);
---

<!doctype html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body class="min-h-screen bg-white dark:bg-gray-950 antialiased">
    <Navbar />
    <main>
      <section class="w-full bg-gradient-to-br from-primary-600 via-primary-500 to-primary-400 dark:from-primary-900 dark:via-primary-800 dark:to-primary-700 py-24 px-4 text-center">
        <div class="max-w-3xl mx-auto">
          <h1 class="text-4xl sm:text-5xl font-extrabold text-white mb-4 drop-shadow-lg">
            Welcome to ContentAgen Blog
          </h1>
          <p class="text-lg sm:text-xl text-white/90 mb-8">
            Insights, guides, and updates from the ContentAgen team.
          </p>
          <a
            href="/blog"
            class="inline-block px-8 py-3 bg-white text-primary-700 font-semibold rounded-lg shadow hover:bg-primary-50 focus:outline-none focus:ring-2 focus:ring-primary-300 transition"
            aria-label="Go to blog posts"
          >
            Explore the Blog
          </a>
        </div>
      </section>
      <LatestPosts posts={posts} />
    </main>
    <Footer />
  </body>
</html>
